/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/milsymbol@2.0.0/src/symbolfunctions/textfields.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
export default function textfields(t){var i,o,s=[],n=[],e=this.metadata.baseGeometry.bbox,a=("object"==typeof this.style.infoColor?this.style.infoColor[this.metadata.affiliation]:this.style.infoColor)||this.colors.iconColor[this.metadata.affiliation]||this.colors.iconColor.Friend,h=this.style.fontfamily,p=this.style.infoSize,l="object"==typeof this.style.infoBackground?this.style.infoBackground[this.metadata.affiliation]:this.style.infoBackground,r="object"==typeof this.style.infoBackground?this.style.infoBackground[this.metadata.affiliation]:this.style.infoBackground,f=new t.BBox,y=20;function m(t){var i,o=[];for(var s in t)if(this.options.hasOwnProperty(s)&&""!=this.options[s]){if(!t.hasOwnProperty(s))continue;for(var n=0;n<(t[s].length||1);n++){var e;if(i={y2:(e=Array.isArray(t[s])?t[s][n]:t[s]).y,y1:e.y-e.fontsize},"start"==e.textanchor&&(i.x1=e.x,i.x2=e.x+u(this.options[s])*(e.fontsize/p)),"middle"==e.textanchor){var l=u(this.options[s])*(e.fontsize/p);i.x1=e.x-l/2,i.x2=e.x+l/2}"end"==e.textanchor&&(i.x1=e.x-u(this.options[s])*(e.fontsize/p),i.x2=e.x),f.merge(i);var r={type:"text",fontfamily:h,fill:a};e.hasOwnProperty("fill")&&(r.fill=e.fill),e.hasOwnProperty("stroke")&&(r.stroke=e.stroke),e.hasOwnProperty("textanchor")&&(r.textanchor=e.textanchor),e.hasOwnProperty("fontsize")&&(r.fontsize=e.fontsize),e.hasOwnProperty("fontweight")&&(r.fontweight=e.fontweight),r.x=e.x,r.y=e.y,r.text=this.options[s],o.push(r)}}return o}function u(t){if(0==t.length)return 0;for(var i={" ":9,"!":10,'"':15,"#":17,$:17,"%":27,"&":22,"'":8,"(":10,")":10,"*":12,"+":18,",":9,"-":10,".":9,"/":9,0:17,1:17,2:17,3:17,4:17,5:17,6:17,7:17,8:17,9:17,":":10,";":10,"<":18,"=":18,">":18,"?":19,"@":30,A:22,B:22,C:22,D:22,E:21,F:19,G:24,H:22,I:9,J:17,K:22,L:19,M:25,N:22,O:24,P:21,Q:24,R:22,S:21,T:19,U:22,V:21,W:29,X:21,Y:21,Z:19,"[":10,"]":10,"^":18,_:17,"`":10,a:17,b:19,c:17,d:19,e:17,f:10,g:19,h:19,i:9,j:9,k:17,l:9,m:27,n:19,o:19,p:19,q:19,r:12,s:17,t:10,u:19,v:17,w:24,x:17,y:17,z:15,"{":12,"|":9,"}":12,"~":18},o=0,s=0;s<t.length;s++)o+=p/30*(i[t[s]]?i[t[s]]:28.5);return o+=y}if(this.metadata.numberSIDC){if(!t._labelCache.hasOwnProperty("number"))for(i in t._labelCache.number={},t._labelOverrides.number)t._labelOverrides.number.hasOwnProperty(i)&&t._labelOverrides.number[i].call(this,t._labelCache.number);if(o=this.metadata.functionid.substr(0,6),this.metadata.controlMeasure&&t._labelCache.number.hasOwnProperty(o))return n.push(m.call(this,t._labelCache.number[o])),this.style.outlineWidth>0&&s.push(t.outline(n,this.style.outlineWidth,this.style.strokeWidth,"object"==typeof this.style.outlineColor?this.style.outlineColor[this.metadata.affiliation]:this.style.outlineColor)),{pre:s,post:n,bbox:f}}else{if(!t._labelCache.hasOwnProperty("letter"))for(i in t._labelCache.letter={},t._labelOverrides.letter)t._labelOverrides.letter.hasOwnProperty(i)&&t._labelOverrides.letter[i].call(this,t._labelCache.letter);if(o=this.options.sidc.substr(0,1)+"-"+this.options.sidc.substr(2,1)+"-"+this.options.sidc.substr(4,6),t._labelCache.letter.hasOwnProperty(o))return n.push(m.call(this,t._labelCache.letter[o])),this.style.outlineWidth>0&&s.push(t.outline(n,this.style.outlineWidth,this.style.strokeWidth,"object"==typeof this.style.outlineColor?this.style.outlineColor[this.metadata.affiliation]:this.style.outlineColor)),{pre:s,post:n,bbox:f}}var x,d,c,R=this.options.quantity||this.options.reinforcedReduced||this.options.staffComments||this.options.additionalInformation||this.options.evaluationRating||this.options.combatEffectiveness||this.options.signatureEquipment||this.options.higherFormation||this.options.hostile||this.options.iffSif||this.options.sigint||this.options.uniqueDesignation||this.options.type||this.options.dtg||this.options.altitudeDepth||this.options.location||this.options.speed||this.options.specialHeadquarters||this.options.platformType||this.options.equipmentTeardownTime||this.options.commonIdentifier||this.options.auxiliaryEquipmentIndicator||this.options.headquartersElement||this.options.installationComposition||this.options.guardedUnit||this.options.specialDesignator;if(this.style.infoFields&&R){this.options.specialHeadquarters&&n.push((x=this.options.specialHeadquarters,d=42,c=115,1==x.length&&(d=45,c=115),3==x.length&&(d=35,c=110),x.length>=4&&(d=32,c=110),{type:"text",text:x,x:100,y:c,textanchor:"middle",fontsize:d,fontfamily:h,fill:a,stroke:!1,fontweight:"bold"})),this.options.quantity&&!this.metadata.dismounted&&(n.push({type:"text",text:this.options.quantity,x:100,y:e.y1-10,textanchor:"middle",fontsize:p,fontfamily:h,fill:a,stroke:!1}),f.y1=e.y1-10-p),this.options.headquartersElement&&(n.push({type:"text",text:this.options.headquartersElement,x:100,y:e.y2+35,textanchor:"middle",fontsize:35,fontfamily:h,fontweight:"bold",fill:a,stroke:!1}),f.y2=e.y2+35);var b,g={L1:"",L2:"",L3:"",L4:"",L5:"",R1:"",R2:"",R3:"",R4:"",R5:""};if(isNaN(this.options.sidc)||"Air"!=this.metadata.baseDimension||(g.R1=this.options.uniqueDesignation,g.R2=this.options.iffSif,g.R3=this.options.type,(this.options.speed||this.options.altitudeDepth)&&(b=[],this.options.speed&&b.push(this.options.speed),this.options.altitudeDepth&&b.push(this.options.altitudeDepth),g.R4=b.join("/")),(this.options.staffComments||this.options.additionalInformation)&&(b=[],this.options.staffComments&&b.push(this.options.staffComments),this.options.additionalInformation&&b.push(this.options.additionalInformation),g.R5=b.join("/"))),(isNaN(this.options.sidc)||"Ground"==this.metadata.baseDimension)&&(g.L1=this.options.dtg,(this.options.altitudeDepth||this.options.location)&&(b=[],this.options.altitudeDepth&&b.push(this.options.altitudeDepth),this.options.location&&b.push(this.options.location),g.L2=b.join("/")),g.L4=this.options.uniqueDesignation,g.L5=this.options.speed,g.R2=this.options.staffComments,g.R4=this.options.higherFormation,(this.options.evaluationRating||this.options.combatEffectiveness||this.options.signatureEquipment||this.options.hostile||this.options.iffSif)&&(b=[],this.options.evaluationRating&&b.push(this.options.evaluationRating),this.options.combatEffectiveness&&b.push(this.options.combatEffectiveness),this.options.signatureEquipment&&b.push(this.options.signatureEquipment),this.options.hostile&&b.push(this.options.hostile),this.options.iffSif&&b.push(this.options.iffSif),g.R5=b.join("/")),isNaN(this.options.sidc)||this.metadata.unit?((this.options.type||this.options.platformType||this.options.equipmentTeardownTime)&&(b=[],this.options.type&&b.push(this.options.type),this.options.platformType&&b.push(this.options.platformType),this.options.equipmentTeardownTime&&b.push(this.options.equipmentTeardownTime),g.L3=b.join("/")),g.R1=this.options.reinforcedReduced,this.metadata.activity&&(g.R1=this.options.country),(this.options.additionalInformation||this.options.commonIdentifier)&&(b=[],this.options.additionalInformation&&b.push(this.options.additionalInformation),this.options.commonIdentifier&&b.push(this.options.commonIdentifier),g.R3=b.join("/"))):((this.options.type||this.options.platformType||this.options.commonIdentifier||this.options.installationComposition)&&(b=[],this.options.type&&b.push(this.options.type),this.options.platformType&&b.push(this.options.platformType),this.options.commonIdentifier&&b.push(this.options.commonIdentifier),this.options.installationComposition&&b.push(this.options.installationComposition),g.L3=b.join("/")),g.R1=this.options.country,(this.options.additionalInformation||this.options.equipmentTeardownTime)&&(b=[],this.options.additionalInformation&&b.push(this.options.additionalInformation),this.options.equipmentTeardownTime&&b.push(this.options.equipmentTeardownTime),g.R3=b.join("/")))),this.metadata.dismounted&&(this.options.quantity&&(n.push({type:"text",text:this.options.quantity,x:100,y:e.y2+p,textanchor:"middle",fontsize:p,fontfamily:h,fill:a,stroke:!1}),f.y2=e.y2+p),g.L1=this.options.dtg,(this.options.altitudeDepth||this.options.location)&&(b=[],this.options.altitudeDepth&&b.push(this.options.altitudeDepth),this.options.location&&b.push(this.options.location),g.L2=b.join("/")),(this.options.type||this.options.platformType||this.options.commonIdentifier)&&(b=[],this.options.type&&b.push(this.options.type),this.options.platformType&&b.push(this.options.platformType),this.options.commonIdentifier&&b.push(this.options.commonIdentifier),g.L3=b.join("/")),g.L4=this.options.uniqueDesignation,g.L5=this.options.speed,g.R1=this.options.country,g.R2=this.options.staffComments,this.options.additionalInformation&&(b=[],this.options.additionalInformation&&b.push(this.options.additionalInformation),g.R3=b.join("/")),g.R4=this.options.higherFormation,(this.options.evaluationRating||this.options.combatEffectiveness||this.options.signatureEquipment||this.options.hostile||this.options.iffSif)&&(b=[],this.options.evaluationRating&&b.push(this.options.evaluationRating),this.options.combatEffectiveness&&b.push(this.options.combatEffectiveness),this.options.signatureEquipment&&b.push(this.options.signatureEquipment),this.options.hostile&&b.push(this.options.hostile),this.options.iffSif&&b.push(this.options.iffSif),g.R5=b.join("/"))),isNaN(this.options.sidc)||"Sea"!=this.metadata.baseDimension||((this.options.guardedUnit||this.options.specialDesignator)&&(b=[],this.options.guardedUnit&&b.push(this.options.guardedUnit),this.options.specialDesignator&&b.push(this.options.specialDesignator),g.L1=b.join("/")),g.R1=this.options.uniqueDesignation,g.R2=this.options.type,g.R3=this.options.iffSif,(this.options.staffComments||this.options.additionalInformation)&&(b=[],this.options.staffComments&&b.push(this.options.staffComments),this.options.additionalInformation&&b.push(this.options.additionalInformation),g.R4=b.join("/")),(this.options.location||this.options.speed)&&(b=[],this.options.location&&b.push(this.options.location),this.options.speed&&b.push(this.options.speed),g.R5=b.join("/"))),isNaN(this.options.sidc)||"Subsurface"!=this.metadata.baseDimension||(g.L1=this.options.specialDesignator,g.R1=this.options.uniqueDesignation,g.R2=this.options.type,g.R3=this.options.altitudeDepth,g.R4=this.options.staffComments,g.R5=this.options.additionalInformation),f.x1=e.x1-Math.max(this.options.specialHeadquarters?(u(this.options.specialHeadquarters)-this.metadata.baseGeometry.bbox.width())/2:0,this.options.quantity?(u(this.options.quantity)-this.metadata.baseGeometry.bbox.width())/2:0,u(g.L1),u(g.L2),u(g.L3),u(g.L4),u(g.L5)),f.x2=e.x2+Math.max(this.options.specialHeadquarters?(u(this.options.specialHeadquarters)-this.metadata.baseGeometry.bbox.width())/2:0,this.options.quantity?(u(this.options.quantity)-this.metadata.baseGeometry.bbox.width())/2:0,u(g.R1),u(g.R2),u(g.R3),u(g.R4),u(g.R5)),(g.L1||g.R1)&&(f.y1=Math.min(f.y1,100-2.5*p)),(g.L2||g.R2)&&(f.y1=Math.min(f.y1,100-1.5*p)),(g.L4||g.R4)&&(f.y2=Math.max(f.y2,100+1.7*p)),(g.L5||g.R5)&&(f.y2=Math.max(f.y2,100+2.7*p)),this.style.infoBackground){var L={x1:100,y1:1e3,y2:0},q={x2:100,y1:1e3,y2:0};g.L1&&(L={x1:Math.min(L.x1,e.x1-u(g.L1)),x2:e.x1-10,y1:Math.min(L.y1,100-2.5*p),y2:Math.max(L.y2,100-1.5*p+10)}),g.L2&&(L={x1:Math.min(L.x1,e.x1-u(g.L2)),x2:e.x1-10,y1:Math.min(L.y1,100-1.5*p),y2:Math.max(L.y2,100-.5*p+10)}),g.L3&&(L={x1:Math.min(L.x1,e.x1-u(g.L3)),x2:e.x1-10,y1:Math.min(L.y1,100-.5*p),y2:Math.max(L.y2,100+.5*p+10)}),g.L4&&(L={x1:Math.min(L.x1,e.x1-u(g.L4)),x2:e.x1-10,y1:Math.min(L.y1,100+.5*p),y2:Math.max(L.y2,100+1.5*p+10)}),g.L5&&(L={x1:Math.min(L.x1,e.x1-u(g.L5)),x2:e.x1-10,y1:Math.min(L.y1,100+1.5*p),y2:Math.max(L.y2,100+2.5*p+10)}),L.hasOwnProperty("x2")&&(f.x1-=p/2,n.push({type:"path",d:"M "+(L.x1-p/2)+","+(L.y1+p/2)+" "+L.x1+","+L.y1+" "+L.x2+","+L.y1+" "+L.x2+","+L.y2+" "+(L.x1-p/2)+","+L.y2+"z",fill:l,stroke:r||!1})),g.R1&&(q={x1:e.x2+10,x2:Math.max(q.x2,e.x2+u(g.R1)),y1:Math.min(q.y1,100-2.5*p),y2:Math.max(q.y2,100-1.5*p+10)}),g.R2&&(q={x1:e.x2+10,x2:Math.max(q.x2,e.x2+u(g.R2)),y1:Math.min(q.y1,100-1.5*p),y2:Math.max(q.y2,100-.5*p+10)}),g.R3&&(q={x1:e.x2+10,x2:Math.max(q.x2,e.x2+u(g.R3)),y1:Math.min(q.y1,100-.5*p),y2:Math.max(q.y2,100+.5*p+10)}),g.R4&&(q={x1:e.x2+10,x2:Math.max(q.x2,e.x2+u(g.R4)),y1:Math.min(q.y1,100+.5*p),y2:Math.max(q.y2,100+1.5*p+10)}),g.R5&&(q={x1:e.x2+10,x2:Math.max(q.x2,e.x2+u(g.R5)),y1:Math.min(q.y1,100+1.5*p),y2:Math.max(q.y2,100+2.5*p+10)}),q.hasOwnProperty("x1")&&(f.x2+=p/2,n.push({type:"path",d:"M "+q.x1+","+q.y1+" "+(q.x2+p/2)+","+q.y1+" "+(q.x2+p/2)+","+(q.y2-p/2)+" "+q.x2+","+q.y2+" "+q.x1+","+q.y2+"z",fill:l,stroke:r||!1}))}g.L1&&n.push({type:"text",text:g.L1,x:e.x1-y,y:100-1.5*p,textanchor:"end",fontsize:p,fontfamily:h,fill:a,stroke:!1}),g.L2&&n.push({type:"text",text:g.L2,x:e.x1-y,y:100-.5*p,textanchor:"end",fontsize:p,fontfamily:h,fill:a,stroke:!1}),g.L3&&n.push({type:"text",text:g.L3,x:e.x1-y,y:100+.5*p,textanchor:"end",fontsize:p,fontfamily:h,fill:a,stroke:!1}),g.L4&&n.push({type:"text",text:g.L4,x:e.x1-y,y:100+1.5*p,textanchor:"end",fontsize:p,fontfamily:h,fill:a,stroke:!1}),g.L5&&n.push({type:"text",text:g.L5,x:e.x1-y,y:100+2.5*p,textanchor:"end",fontsize:p,fontfamily:h,fill:a,stroke:!1}),g.R1&&n.push({type:"text",text:g.R1,x:e.x2+y,y:100-1.5*p,textanchor:"start",fontsize:p,fontfamily:h,fill:a,stroke:!1}),g.R2&&n.push({type:"text",text:g.R2,x:e.x2+y,y:100-.5*p,textanchor:"start",fontsize:p,fontfamily:h,fill:a,stroke:!1}),g.R3&&n.push({type:"text",text:g.R3,x:e.x2+y,y:100+.5*p,textanchor:"start",fontsize:p,fontfamily:h,fill:a,stroke:!1}),g.R4&&n.push({type:"text",text:g.R4,x:e.x2+y,y:100+1.5*p,textanchor:"start",fontsize:p,fontfamily:h,fill:a,stroke:!1}),g.R5&&n.push({type:"text",text:g.R5,x:e.x2+y,y:100+2.5*p,textanchor:"start",fontsize:p,fontfamily:h,fill:a,stroke:!1}),this.style.outlineWidth>0&&s.push(t.outline(n,this.style.outlineWidth,this.style.strokeWidth,"object"==typeof this.style.outlineColor?this.style.outlineColor[this.metadata.affiliation]:this.style.outlineColor))}return{pre:s,post:n,bbox:f}}
//# sourceMappingURL=/sm/52ede12215d74c60cee8d0091f986b912e3784300d2726330c37cf368166bfc3.map